<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>ミニメッセージボード</title>
    <script>
        function init(){
            //ローカルストレージから値を取得する
            let id = localStorage.getItem('id');
            //IDがまだ未登録の場合、ログインページに遷移する
            if(id == null){
                location.href = './login';
            }
            document.querySelector('#id').textContent = 'ID:' + id;
            document.querySelector('#id_input').value = id;
        }
    </script>
</head>
    <body class="container">
        <header>
            <h1 class="display-4">メッセージボード</h1>
        </header>

        <div role="main">
            <p>メッセージは最大10個まで保管されます。</p>
            <form action="/" method="post">
                <p id="id"></p>
                <input type="hidden" name="id" id="id_input">
                <div class="form-qroup">
                    <label for="msg">Message</label>
                    <input type="text" name="msg" id="msg" class="form-control">
                </div>
                <input type="submit" value="送信" class="btn btn-primary">
            </form>

            <table class="table">
                <% for(let i in data) { %>
                    <%- include('data_item',{val:data[i]}) %>
                <% } %>
            </table>
        </div>
    </body>
</html>